(function(a){a.fn.swipe=function(h){var c=null,d=false;if(!this)return d;var b={fingers:1,threshold:75,timeThreshold:250,swipe:c,swipeLeft:c,swipeRight:c,swipeUp:c,swipeDown:c,swipeStatus:c,click:c,triggerOnTouchEnd:true,allowPageScroll:"auto"},j="left",l="right",n="up",m="down",t="none",o="horizontal",q="vertical",x="auto",u="start",p="move",i="end",g="cancel",f="ontouchstart"in window,w=f?"touchstart":"mousedown",r=f?"touchmove":"mousemove",s=f?"touchend":"mouseup",v="touchcancel",e="start",k;if(h.allowPageScroll==undefined&&(h.swipe!=undefined||h.swipeStatus!=undefined))h.allowPageScroll=t;h&&a.extend(b,h);return this.each(function(){var D=this,E=D,C=a(D),N=c,B=0,A={x:0,y:0},h={x:0,y:0},J={x:0,y:0};function M(a){var g=f?a.touches[0]:a;e=u;if(f)B=a.touches.length;distance=0;direction=c;if(B==b.fingers||!f){A.x=h.x=g.pageX;A.y=h.y=g.pageY;b.swipeStatus&&y(a,e);var i=new Date;k=i.getTime()}else z(a);E.addEventListener(r,H,d);E.addEventListener(s,I,d)}function H(a){if(e==i||e==g)return;var c=f?a.touches[0]:a;h.x=c.pageX;h.y=c.pageY;direction=F();if(f)B=a.touches.length;e=p;K(a,direction);if(B==b.fingers||!f){distance=G();b.swipeStatus&&y(a,e,direction,distance);if(!b.triggerOnTouchEnd){var l=new Date,j=l.getTime(),d=j-k;if(distance>=b.threshold&&d<=b.timeThreshold){e=i;y(a,e);z(a)}}}else{e=g;y(a,e);z(a)}}function I(a){a.preventDefault();distance=G();direction=F();if(b.triggerOnTouchEnd){e=i;if((B==b.fingers||!f)&&h.x!=0){var l=new Date,j=l.getTime(),c=j-k;if(distance>=b.threshold&&c<=b.timeThreshold){y(a,e);z(a)}else{e=g;y(a,e);z(a)}}else{e=g;y(a,e);z(a)}}else if(e==p){e=g;y(a,e);z(a)}E.removeEventListener(r,H,d);E.removeEventListener(s,I,d)}function z(){B=0;A.x=0;A.y=0;h.x=0;h.y=0;J.x=0;J.y=0}function y(a,d){b.swipeStatus&&b.swipeStatus.call(C,a,d,direction||c,distance||0);if(d==g)b.click&&(B==1||!f)&&(isNaN(distance)||distance==0)&&b.click.call(C,a,a.target);if(d==i){b.swipe&&b.swipe.call(C,a,direction,distance);switch(direction){case j:b.swipeLeft&&b.swipeLeft.call(C,a,direction,distance);break;case l:b.swipeRight&&b.swipeRight.call(C,a,direction,distance);break;case n:b.swipeUp&&b.swipeUp.call(C,a,direction,distance);break;case m:b.swipeDown&&b.swipeDown.call(C,a,direction,distance)}}}function K(c,d){if(b.allowPageScroll==t)c.preventDefault();else{var a=b.allowPageScroll==x;switch(d){case j:(b.swipeLeft&&a||!a&&b.allowPageScroll!=o)&&c.preventDefault();break;case l:(b.swipeRight&&a||!a&&b.allowPageScroll!=o)&&c.preventDefault();break;case n:(b.swipeUp&&a||!a&&b.allowPageScroll!=q)&&c.preventDefault();break;case m:(b.swipeDown&&a||!a&&b.allowPageScroll!=q)&&c.preventDefault()}}}function G(){return Math.round(Math.sqrt(Math.pow(h.x-A.x,2)+Math.pow(h.y-A.y,2)))}function L(){var c=A.x-h.x,d=h.y-A.y,b=Math.atan2(d,c),a=Math.round(b*180/Math.PI);if(a<0)a=360-Math.abs(a);return a}function F(){var a=L();return a<=45&&a>=0?j:a<=360&&a>=315?j:a>=135&&a<=225?l:a>45&&a<135?m:n}try{D.addEventListener(w,M,d);D.addEventListener(v,z)}catch(O){}})}})(jQuery)